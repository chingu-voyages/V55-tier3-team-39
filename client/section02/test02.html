        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.2/TweenMax.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/ScrollMagic.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/plugins/debug.addIndicators.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/plugins/animation.gsap.js"></script>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
        <!-- Make sure you put this AFTER Leaflet's CSS -->
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
        <script src="https://unpkg.com/leaflet-providers@latest/leaflet-providers.js"></script> 
    <style>

        body, html {
            margin: 0;
            padding: 0;
            font-family: Georgia, serif;
            /*background-color: #f8f1e3;
            color: #222;*/
        }

        #map-background {
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;   
        }

        .scrolly {
            position: relative;
            width: auto;
            max-width: 800px;
            margin: 0 auto;
            padding: 10vh 2rem;
        }

        .step {
            margin: 5rem 0;
            background-color: rgba(0, 0, 0, 0.75);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            opacity: 0;
        }

        .title {
            font-size: 2rem;
            margin-bottom: 1rem;
        }        
        
        p {
            text-align: center;
            text-transform: uppercase;
        }

        .cope-icon{
            filter: hue-rotate(120deg);
        }

    </style>
    <body>
        <section class="section02">
            <div id="map-background"></div>
            <article class="scrolly">
                <div class="step fade-in" data-step="0" data-geopoint="37.000,-120.652">
                    <p style="color:red;"><strong>COMMENT: STEPS DON'T SHOW, SCROLLING EFFECT STILL NOT WORKING. SEE HTML. SCROLLING LIKE SCROLLAMA, LIKELY NAVIGATING A MAP IN BACKGROUND </strong> </p><p>(https://codepen.io/jqyu/pen/aOxxwX, https://codepen.io/jqyu/pen/aOxxwX)</p>

                    <h2 class="title">üó∫Ô∏è Mapping the Bone Wars</h2>
                    <p>Where did it all happen? The Bone Wars left a trail across the American West. These are some of the most iconic sites where Cope and Marsh unearthed dinosaur history.</p>
                </div>

                <!-- Garden Park, Colorado -->
                <div class="step fade-in" data-step="1" data-geopoint="41.010769, -104.100826">
                    <p><strong>Garden Park, Colorado:</strong> A fossil hotspot near Ca√±on City, where both Marsh and Cope excavated bones of *Stegosaurus*, *Allosaurus*, and *Ceratosaurus*. Their rival teams camped just ridges apart.</p>
                </div>

                <!-- Como Bluff, Wyoming -->
                <div class="step fade-in" data-step="2" data-geopoint="35.232,-118.334">
                    <p><strong>Como Bluff, Wyoming:</strong> Discovered in 1877 by railroad workers, this site became a prolific bone bed for Marsh, yielding countless Jurassic species‚Äîincluding many that were later invalidated.</p>
                </div>

                <!-- Morrison, Colorado -->
                <div class="step fade-in" data-step="3">
                    <p><strong>Morrison, Colorado:</strong> A major early site for Cope, who raced to describe Jurassic bones faster than Marsh. This location would give its name to the famed Morrison Formation.</p>
                </div>

                <!-- Dakota Territory (now South Dakota) -->
                <div class="step fade-in" data-step="4">
                    <p><strong>Dakota Territory (now South Dakota):</strong> Cope‚Äôs 1876 expedition uncovered marine fossils and his controversial *Elasmosaurus*, which he famously reconstructed backward‚Äîfuel for Marsh‚Äôs ridicule.</p>
                </div>

                <!-- Judith River, Montana -->
                <div class="step fade-in" data-step="5">
                    <p><strong>Judith River, Montana:</strong> Although less central to the feud, this site became important for later discoveries. Cope briefly worked here, laying groundwork for future Cretaceous finds.</p>
                </div>

                <!-- Closing Note -->
                <div class="step fade-in" data-step="6">
                    <p>The locations are more than pins on a map‚Äîthey're chapters in a saga of ambition, discovery, and scientific rivalry etched into the rock of the American West.</p>
                </div>

                                <!-- Closing Note -->
                <div class="fade-in" data-step="7" style="height:100px">
                </div>

            </article>
        </section>
        <script>

            //
            // leafletjs
            //

            let leafletMap = L.map('map-background');
            leafletMap.setView([51.505, -0.09], 8);
            
            //L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            //    maxZoom: 19,
            //    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            //}).addTo(leafletMap);

            //L.tileLayer.provider('Stadia.StamenWatercolor').addTo(leafletMap);
            //L.tileLayer.provider('Esri.WorldShadedRelief').addTo(leafletMap);
            L.tileLayer.provider('OpenStreetMap.HOT').addTo(leafletMap);

            //const copeIcon = L.divIcon({className:'cope-icon'});
            const copeIcon = L.divIcon({className:'cope-icon'})

            let COORDINATES = {
                HADDONFIELD : {
                    POLYGON : L.polygon([[40.004, -75.332], [40.004, -74.680], [39.827, -74.680], [39.827, -75.332]]),
                    MARKER : L.marker([39.91018, -75.02856]).bindTooltip("Haddonfield", {permanent: true, direction: 'rigt'}),
                    CENTER: [39.91018, -75.02856],
                    IMAGE: L.imageOverlay('../assets/img/Haddonfield.jpg', [[40.234, -75.822],[39.500, -74.099]])
                },
                WEST : {
                    MARKERS : {
                        ComoLake_Marsh: L.marker([41.909779, -106.364129]).bindTooltip("Como Lake, 1868", {permanent: true, direction: 'top'}),
                        Badlands_Marsh: L.marker([43.45, -102.30]).bindTooltip("Badlands, 1870", {permanent: true, direction: 'rigt'}),
                        NiobaraChalk_Marsh: L.marker([42.747, -98.040]).bindTooltip("Niobara Chalk, 1870", {permanent: true, direction: 'rigt'}),
                        Wallace_Marsh: L.marker([38.894155, -101.592892]).bindTooltip("Wallace, 1870", {permanent: true, direction: 'top'}),
                        KansasWest01_Cope: L.marker([38.48, -100.56]).bindTooltip("Smoky Hill River, 1871", {permanent: true, direction: 'bottom'}),
                        KansasWest02_Marsh: L.marker([38.48, -100.40]),
                        NewMexico_Cope: L.marker([36.205693, -105.184615]).bindTooltip("New Mexico, 1876", {permanent: true, direction: 'rigt'}),
                        Calendron_Cope: L.marker([34.821501, -100.963243]).bindTooltip("Calendron, 1876", {permanent: true, direction: 'rigt'}),
                        Morrinson_Marsh: L.marker([39.627762, -105.205718]).bindTooltip("Morrinson, 1877", {permanent: true, direction: 'rigt'}),
                        CanonCity01_Cope: L.marker([38.530034, -105.207316]).bindTooltip("Canyon City, 1877", {permanent: true, direction: 'rigt'}),
                        CanonCity02_Marsh: L.marker([38.540034, -105.07316]),
                        ComoBluff01_Cope: L.marker([41.918585, -106.053964]).bindTooltip("Como Bluff, 1877", {permanent: true, direction: 'rigt'}),
                        ComoBluff02_Marsh: L.marker([41.998585, -105.53964]),

   

                    },                  
                    CENTER: [42.910769, -104.100826],
                    IMAGE: L.imageOverlay('../assets/img/West.png', [[49.012996, -114.985097],[36.789253, -93.817622]], {opacity: 0.9})
                }
            }

            //L.marker([41.010769, -104.100826]).bindTooltip("TheWestFront", {permanent: true, direction: 'rigt'}),

            //
            // ScrollMagic
            //

            // init controller
            var controller = new ScrollMagic.Controller();

            // loop through all elements
            document.querySelectorAll('.fade-in').forEach((elm, i)=>{
                let tween = TweenMax.from(elm, 0.3, {autoAlpha: 0, scale: 0.5, y: '+=30', ease:Linear.easeNone});
                let scene = new ScrollMagic.Scene({
                triggerElement: elm,
                duration: '40%',
                triggerHook: .45
            })
            .setTween(tween) // trigger a TweenMax.to tween
            .on('end', sceneHandler.bind(elm))
            .setPin(`[data-step = "${elm.dataset.step}"]`)
            .addIndicators()
            .addTo(controller);
            });

            function sceneHandler(e){

                
                let latlng;

                if(this.dataset.geopoint){
                    latlng = this.dataset.geopoint.split(',');
                }

               
                let lat, lng, zoom;
                if(this.dataset.step === '0'){
                    // parse lat and lng from the divs data attribute
                    lat = latlng[0];
                    lng = latlng[1];
                    zoom = 10;
                    // set the view
                    if(lat !== undefined && lng !== undefined){
                        leafletMap.flyTo(COORDINATES.HADDONFIELD.CENTER, 11);
                        //COORDINATES.HADDONFIELD.POLYGON.addTo(leafletMap);
                        COORDINATES.HADDONFIELD.IMAGE.addTo(leafletMap);
                        COORDINATES.HADDONFIELD.MARKER.addTo(leafletMap);
                    };
                }else if(this.dataset.step === '1'){
                    // parse lat and lng from the divs data attribute
                    lat = latlng[0];
                    lng = latlng[1];
                    zoom = 10;
                    if(lat !== undefined && lng !== undefined){
                        leafletMap.flyTo(COORDINATES.WEST.CENTER, 6);
                        //COORDINATES.HADDONFIELD.POLYGON.addTo(leafletMap);
                        COORDINATES.WEST.IMAGE.addTo(leafletMap);
                        //COORDINATES.WEST.MARKER.addTo(leafletMap);
                        let markerKeys = Object.keys(COORDINATES.WEST.MARKERS);
                        for(let key of markerKeys){
                            let marker = COORDINATES.WEST.MARKERS[key].addTo(leafletMap);
                            let who = key.split('_')[1];
                            if(who == 'Cope') marker._icon.classList.add("cope-icon");
                        }
                    };
                }else{
                    leafletMap.flyTo([51.505, -0.09], 8);
                };



            }
        </script>
        <script></script>
    </body>
</html>